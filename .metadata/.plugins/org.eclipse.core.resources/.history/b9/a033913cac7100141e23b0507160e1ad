package lp2.lab06;

import org.junit.*;

/**
 * Testes da classe CD.
 * @author Paulo Vinicius Soares.
 * @version 1.3 - 20/11/2014
 *
 */
public class TestaCD {
	private CD cd;
	private CD cd2;
	private CD cd3;
	private static final int NUM_FAIXAS_CONSTRUTOR = 10;
	private static final int NUM_FAIXAS_CONSTRUTOR_ZERO = 0;
	private static final int NUM_FAIXAS_CONSTRUTOR_NEGATIVO = -1;
	
	@Test
	public void testaConstrutor () throws Exception {
		
		try {
			cd = new CD(null, "Fernando e Sorocaba", NUM_FAIXAS_CONSTRUTOR);
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		try {
			cd = new CD("", "Fernando e Sorocaba", NUM_FAIXAS_CONSTRUTOR);
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		try {
			cd = new CD("Parachutes", null, NUM_FAIXAS_CONSTRUTOR);
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		try {
			cd = new CD("Parachutes", "", NUM_FAIXAS_CONSTRUTOR);
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		try {
			cd = new CD("X&Y", "Coldplay", NUM_FAIXAS_CONSTRUTOR_ZERO);
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O valor de M não pode ser menor que 1.", e.getMessage());
		}
		
		try {
			cd = new CD("X&Y", "Coldplay", NUM_FAIXAS_CONSTRUTOR_NEGATIVO);
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O valor de M não pode ser menor que 1.", e.getMessage());
		}
		
		try {
			cd = new CD("Mylo Xyloto", "");
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		try {
			cd = new CD("Mylo Xyloto", null);
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		try {
			cd = new CD("", "Coldplay");
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		try {
			cd = new CD(null, "Coldplay");
			Assert.fail("Deve lançar exceção.");
		} catch (Exception e) {
			Assert.assertEquals("O título do CD não pode ser vazio, assim como o seu autor.", e.getMessage());
		}
		
		cd = new CD("X&Y", "Coldplay", NUM_FAIXAS_CONSTRUTOR);
		Assert.assertTrue(cd.getM() == 10);
		Assert.assertTrue(cd.getAutorCD() == "Coldplay");
		Assert.assertTrue(cd.getTituloCD() == "X&Y");
	}
	
	@Test
	public void testaConstrutorDefault () throws Exception {
		cd2 = new CD("Dollhouse", "Melanie Martinez");
		Assert.assertTrue(cd2.getM() == 10);
		Assert.assertTrue(cd2.getAutorCD() == "Melanie Martinez");
		Assert.assertTrue(cd2.getTituloCD() == "Dollhouse");
	}
	
	@Test
	public void testaEstaVazio () throws Exception {
		cd = new CD("Humbug", "Arctic Monkeys", 13);
		for (int i = 1; i <= cd.getM(); i++) {
			Assert.assertTrue(cd.getFaixa(i) == "");
		}
	}
	
	@Test
	public void testaCadastraCD () throws Exception {
		cd = new CD("Humbug", "Arctic Monkeys", 3);
		Assert.assertTrue(cd.cadastroFaixasCD("My Propeller"));
		Assert.assertTrue(cd.cadastroFaixasCD("Secret Door"));
		Assert.assertTrue(cd.cadastroFaixasCD("Potion Approaching"));
		
		try {
			cd.setTrilhaPrincipal("Pretty Visitors");
		} catch (Exception e) {
			Assert.assertEquals("A trilha não existe no CD, então não pode ser escolhida como trilha principal.", e.getMessage());
		}
		
		cd.setTrilhaPrincipal("My Propeller");
		Assert.assertTrue(cd.getTituloCD() == "Humbug");
		Assert.assertTrue(cd.getAutorCD() == "Arctic Monkeys");
		Assert.assertTrue(cd.getFaixa(1) == "My Propeller");
		Assert.assertTrue(cd.getTrilhaPrincipal().equals("My Propeller"));
		Assert.assertTrue(cd.getFaixa(2) == "Secret Door");
		Assert.assertTrue(cd.getFaixa(3) == "Potion Approaching");
		Assert.assertTrue(cd.getFaixa(4) == null);
		Assert.assertFalse(cd.cadastroFaixasCD("Cornerstone"));
	}
	
	@Test
	public void testaEquals () throws Exception {
		Sala sala = new Sala(10, 10);
		cd = new CD("The New Classic", "Iggy Azalea", 16);
		cd2 = new CD("1000 forms of Fear", "Sia", 15);
		cd3 = new CD("Matangi", "M.I.A", 15);
		Assert.assertFalse(cd.equals(sala));
		Assert.assertFalse(cd.equals(cd2));
		Assert.assertFalse(cd.equals(cd3));
		Assert.assertFalse(cd2.equals(cd3));
		cd2 = new CD("The New Classic", "Iggy Azalea", 16);
		Assert.assertTrue(cd.equals(cd2));
		Assert.assertFalse(cd.equals(cd3));
		Assert.assertFalse(cd3.equals(cd2));	
	}
	
	@Test
	public void testaToString () throws Exception {
		cd = new CD("Melophobia", "Cage the Elephant", 10);
		cd2 = new CD("1000 forms of Fear", "Sia", 15);
		cd3 = new CD("Matangi", "M.I.A", 15);
		Assert.assertEquals("Melophobia - Autor/Artista: Cage the Elephant", cd.toString());
		Assert.assertEquals("1000 forms of Fear - Autor/Artista: Sia", cd2.toString());
		Assert.assertEquals("Matangi - Autor/Artista: M.I.A", cd3.toString());
	}
	
	@Test
	public void testaCompareTo () throws Exception {
		cd = new CD("Ultraviolence", "Lana del Rey", 15);
		cd2 = new CD("Hideaway", "Kiesza", 1);
		cd3 = new CD("Matangi", "M.I.A", 15);
		Assert.assertTrue(cd.compareTo(cd2) > 0);
		Assert.assertTrue(cd.compareTo(cd3) < 0);
		Assert.assertTrue(cd2.compareTo(cd) < 0);
		Assert.assertTrue(cd2.compareTo(cd3) < 0);
		Assert.assertTrue(cd3.compareTo(cd) > 0);
		Assert.assertTrue(cd3.compareTo(cd2) > 0);
		cd3 = new CD("Ultraviolence", "Lana del Rey", 15);
		Assert.assertTrue(cd3.compareTo(cd) == 0);
	}
}
